# ProGuard/R8 rules to handle duplicate classes
# This file helps R8 handle duplicate class definitions

# Keep all classes in savedstate package
-keep class androidx.savedstate.** { *; }

# Don't warn about duplicate classes - R8 will use the first occurrence
-dontwarn androidx.savedstate.ViewKt

# Allow duplicate classes from different AAR files
-ignorewarnings

# Handle MediaPipe duplicate class conflict between tasks-vision and tasks-vision-image-generator
# The AutoValue_ImageProcessingOptions$1 class is defined in both AARs
# Note: R8 will fail on duplicate classes, so we need to keep both and let R8 choose
-keep class com.google.mediapipe.tasks.vision.core.** { *; }
# Suppress all warnings for MediaPipe core classes to allow build to proceed
-dontwarn com.google.mediapipe.tasks.vision.core.**

# Keep Scanflow classes to prevent initialization errors
-keep class com.scanflow.** { *; }
-keep class scanflow.** { *; }
-dontwarn com.scanflow.**
-dontwarn scanflow.**

# Keep native methods
-keepclasseswithmembernames class * {
    native <methods>;
}

